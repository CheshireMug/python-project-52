{% extends "base.html" %}

{% block content %}
    <div class="container wrapper flex-grow-1">
      {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
      {% endif %}
      
      <h1 class="my-4">Задачи</h1>

      <a class="btn btn-primary mb-3" href="{% url 'tasks:tasks_create'%}">Создать задачу</a>
      
      {% include "tasks/filter_form.html" %}

      <table class="table table-striped">
        <thead>
            <tr>
            <th>ID</th>
            <th>Имя</th>
            <th>Статус</th>
            <th>Автор</th>
            <th>Исполнитель</th>
            <th>Дата создания</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                <td>{{ task.id }}</td>
                <td>{{ task.name }}</td>
                <td>{{ task.status }}</td>
                <td>{{ task.author.first_name }} {{ task.author.last_name }}</td>
                <td>{{ task.executor.first_name }} {{ task.executor.last_name }}</td>
                <td>{{ task.created_at }}</td>
                <td>
                <a href="{% url 'tasks:tasks_update' task.pk %}">Изменить</a>
                <br>
                <a href="{% url 'tasks:tasks_delete' task.pk %}">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
        </table>
    </div>
{% endblock %}